"use strict";

/*
 * @file
 * example.get-vault-objects.js
 *
 * Requirements:
 * - create a file "credentials.json" similar to the following:
 *
 *   {
 *     "host": "https://your-agency-subdomain.veevavault.com/api/v18.3/",
 *     "username": "my-username@vv-agency.com",
 *     "password": "my-password"
 *   }
 *
 * This example demonstrates:
 * - retrieving a list of all Product vault objects
 * - retrieving a list of all Country vault objects
 */

const fs = require("file-system");

const vault = require("../veeva-vault");

var secret = JSON.parse(fs.readFileSync("credentials.json", "utf8"));

vault.verbose(true);

vault
  .authenticate({
    host: secret.host,
    username: secret.username,
    password: secret.password
  })
  .then(function() {
    // Get Products.
    return vault.getProducts();
  })
  .then(function(products) {
    console.log("\nRetrieved products: ", products);

    // Get Countries.
    return vault.getCountries();
  })
  .then(function(countries) {
    console.log("\nRetrieved countries: ", countries);
  })
  .catch(function(e) {
    console.log("\n\nError somewhere...:", e.message);
  });
